const g="modulepreload",x=function(e,t){return new URL(e,t).href},b={},k=function(t,n,r){let l=Promise.resolve();if(n&&n.length>0){let d=function(a){return Promise.all(a.map(s=>Promise.resolve(s).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=d(n.map(a=>{if(a=x(a,r),a in b)return;b[a]=!0;const s=a.endsWith(".css"),f=s?'[rel="stylesheet"]':"";if(!!r)for(let m=o.length-1;m>=0;m--){const y=o[m];if(y.href===a&&(!s||y.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(a,'"]').concat(f)))return;const h=document.createElement("link");if(h.rel=s?"stylesheet":g,s||(h.as="script"),h.crossOrigin="",h.href=a,u&&h.setAttribute("nonce",u),document.head.appendChild(h),s)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error("Unable to preload CSS for ".concat(a))))})}))}function c(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return l.then(o=>{for(const i of o||[])i.status==="rejected"&&c(i.reason);return t().catch(c)})},v={init:function(){console.log("rexQL.playground.init()");const e=document.getElementById("graphql-query"),t=document.getElementById("api-key-input"),n=document.getElementById("execute-query"),r=document.getElementById("clear-result"),l=document.getElementById("introspect"),c=document.getElementById("query-result");!e||!n||(this.initCodemirror(e),n.addEventListener("click",function(){const o=e.value.trim();rexQL.playground.executeQuery(o,t.value.trim(),c,n,l)}),l.addEventListener("click",function(){rexQL.playground.executeQuery("\n{\n  __schema {\n    queryType {\n      name\n      fields {\n        name\n        type {\n          name\n          kind\n        }\n      }\n    }\n  }\n}",t.value.trim(),c,n,l)}),r.addEventListener("click",function(){c.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(e,t,n,r,l){var u;if(!e){alert("Bitte geben Sie eine GraphQL Query ein.");return}n.textContent="Führe Query aus...",r.disabled=!0,l.disabled=!0;const c={query:e},o={"Content-Type":"application/json"};t&&(o["X-API-KEY"]=t);const i=((u=document.querySelector("[data-endpoint-url]"))==null?void 0:u.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/index.php?rex-api-call=rexql_graphql";fetch(i,{method:"POST",headers:o,body:JSON.stringify(c)}).then(async d=>{const a=await d.json();if(d.ok)n.textContent=JSON.stringify(a,null,2);else{let s="HTTP "+d.status+": "+d.statusText+"\n\n";throw a.errors&&a.errors.length>0&&(s+="GraphQL Fehler:\n",a.errors.forEach(f=>{s+="• "+f.message+"\n"})),new Error(s)}}).catch(d=>{n.textContent="Netzwerkfehler: "+d.message+"\n\nTipps: Stellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{r.disabled=!1,l.disabled=!1})},initCodemirror:async function(e){const t=await k(()=>import("./graphql-editor-CVrGkj-P.js"),[],import.meta.url),n=document.getElementById("graphql-editor-container");e.style.display="none",new t.GraphQLEditor(n,{schema,initialValue:e.value||"",height:"500px",onChange:r=>{e.value=r}})}},E=function(e,t,n){n=n||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(function(){p(n,"success",e.target)}).catch(function(){rexQL.fallbackCopyToClipboard(e,t,n)}):rexQL.fallbackCopyToClipboard(e,t,n)},L=function(e,t,n){var r=document.createElement("textarea");r.value=t,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",document.body.appendChild(r),r.focus(),r.select();try{var l=document.execCommand("copy");l?p(n,"success",e.target):prompt("Bitte manuell kopieren:",t)}catch(c){console.error("Copy to clipboard failed:",c),prompt("Bitte manuell kopieren:",t)}document.body.removeChild(r)},p=function(e,t,n){t=t||"info";var r="alert-info";t==="success"&&(r="alert-success"),t==="error"&&(r="alert-danger"),t==="warning"&&(r="alert-warning");var l=document.createElement("div");l.className="alert rexql-notificiation "+r+" alert-dismissible",l.innerHTML='<div><button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+e+"</strong></div>";try{var c=document.querySelector(".rex-page-header")||document.body;c.appendChild(l)}catch(o){console.error("showNotification:",o)}setTimeout(function(){l.parentNode&&l.parentNode.removeChild(l)},3e3)},w=function(e){return e.replace(/\s+/g," ").replace(/\{\s*/g,"{\n  ").replace(/\s*\}/g,"\n}").replace(/,\s*/g,",\n  ").trim()},C=function(e){var t=(e.match(/\{/g)||[]).length,n=(e.match(/\}/g)||[]).length;return t!==n?"Unbalanced braces in GraphQL query":e.trim().length===0?"Empty query":null},S={init:function(){const e=document.getElementById("select_all_core_tables");e&&e.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.core-table").forEach(o=>{o.checked=this.checked})});const t=document.getElementById("select_all_yform_tables");t&&t.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.yform-table").forEach(o=>{o.checked=this.checked})});const n=(c,o)=>{const i=document.querySelectorAll(c),u=document.getElementById(o);if(!u)return;const d=Array.from(i).every(a=>a.checked);u.checked=d};document.querySelectorAll(".table-checkbox.core-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.core-table","select_all_core_tables")})}),document.querySelectorAll(".table-checkbox.yform-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.yform-table","select_all_yform_tables")})}),n(".table-checkbox.core-table","select_all_core_tables"),n(".table-checkbox.yform-table","select_all_yform_tables")}};window.rexQL=window.rexQL||{playground:v,copyToClipboard:E,fallbackCopyToClipboard:L,showNotification:p,formatGraphQL:w,validateGraphQL:C,config:S};console.log("rexQL Addon rex:ready");var Q=document.querySelectorAll("pre code");Q.forEach(function(e){e.textContent.trim().startsWith("{")&&e.classList.add("language-graphql")});var _=document.querySelectorAll("[data-copy]");_.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=this.getAttribute("data-copy");rexQL.copyToClipboard(t,n)})});window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init();window.location.href.indexOf("page=rexql/config")!==-1&&rexQL.config.init();
//# sourceMappingURL=rexql.js.map
