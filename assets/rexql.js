window.rexQL=window.rexQL||{};rexQL.playground={init:function(){console.log("rexQL.playground.init()");const t=document.getElementById("graphql-query"),n=document.getElementById("api-key-input"),e=document.getElementById("execute-query"),r=document.getElementById("clear-result"),o=document.getElementById("introspect"),l=document.getElementById("query-result");!t||!e||(e.addEventListener("click",function(){const i=t.value.trim();rexQL.playground.executeQuery(i,n.value.trim(),l,e,o)}),o.addEventListener("click",function(){rexQL.playground.executeQuery("\n{\n  __schema {\n    queryType {\n      name\n      fields {\n        name\n        type {\n          name\n          kind\n        }\n      }\n    }\n  }\n}",n.value.trim(),l,e,o)}),r.addEventListener("click",function(){l.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(t,n,e,r,o){var d;if(!t){alert("Bitte geben Sie eine GraphQL Query ein.");return}e.textContent="Führe Query aus...",r.disabled=!0,o.disabled=!0;const l={query:t},i={"Content-Type":"application/json"};n&&(i["X-API-KEY"]=n);const s=((d=document.querySelector("[data-endpoint-url]"))==null?void 0:d.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/api/graphql";fetch(s,{method:"POST",headers:i,body:JSON.stringify(l)}).then(c=>{if(!c.ok)throw new Error("HTTP "+c.status+": "+c.statusText);return c.json()}).then(c=>{if(c.errors&&c.errors.length>0){let a="GraphQL Fehler:\n";c.errors.forEach(u=>{u.message.includes("API-Schlüssel erforderlich")?a+="• Authentifizierung erforderlich: Bitte geben Sie einen gültigen API-Schlüssel ein.\n":u.message.includes("invalid_api_key")?a+="• Ungültiger API-Schlüssel: Überprüfen Sie Ihren API-Schlüssel.\n":a+="• "+u.message+"\n"}),e.textContent=JSON.stringify({data:c.data,errors:c.errors,info:a},null,2)}else e.textContent=JSON.stringify(c,null,2)}).catch(c=>{e.textContent="Netzwerkfehler: "+c.message+"\n\nStellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{r.disabled=!1,o.disabled=!1})}};rexQL.copyToClipboard=function(t,n){n=n||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(function(){alert(n)}).catch(function(){rexQL.fallbackCopyToClipboard(t,n)}):rexQL.fallbackCopyToClipboard(t,n)};rexQL.fallbackCopyToClipboard=function(t,n){var e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",document.body.appendChild(e),e.focus(),e.select();try{var r=document.execCommand("copy");r?alert(n):prompt("Bitte manuell kopieren:",t)}catch(o){prompt("Bitte manuell kopieren:",t)}document.body.removeChild(e)};window.copyToClipboard=function(t){t.includes("rexql_")?rexQL.copyToClipboard(t,"API-Schlüssel in Zwischenablage kopiert"):rexQL.copyToClipboard(t,"URL in Zwischenablage kopiert")};rexQL.showNotification=function(t,n){n=n||"info";var e="alert-info";n==="success"&&(e="alert-success"),n==="error"&&(e="alert-danger"),n==="warning"&&(e="alert-warning");var r=document.createElement("div");r.className="alert "+e+" alert-dismissible",r.innerHTML='<button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+t+"</strong>";var o=document.querySelector(".rex-page-header")||document.body;o.insertBefore(r,o.firstChild),setTimeout(function(){r.parentNode&&r.parentNode.removeChild(r)},3e3)};rexQL.formatGraphQL=function(t){return t.replace(/\s+/g," ").replace(/\{\s*/g,"{\n  ").replace(/\s*\}/g,"\n}").replace(/,\s*/g,",\n  ").trim()};rexQL.validateGraphQL=function(t){var n=(t.match(/\{/g)||[]).length,e=(t.match(/\}/g)||[]).length;return n!==e?"Unbalanced braces in GraphQL query":t.trim().length===0?"Empty query":null};rexQL.config={init:function(){const t=document.getElementById("select_all_core_tables");t&&t.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.core-table").forEach(i=>{i.checked=this.checked})});const n=document.getElementById("select_all_yform_tables");n&&n.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.yform-table").forEach(i=>{i.checked=this.checked})});const e=(l,i)=>{const s=document.querySelectorAll(l),d=document.getElementById(i);if(!d)return;const c=Array.from(s).every(a=>a.checked);d.checked=c};document.querySelectorAll(".table-checkbox.core-table").forEach(l=>{l.addEventListener("change",function(){e(".table-checkbox.core-table","select_all_core_tables")})}),document.querySelectorAll(".table-checkbox.yform-table").forEach(l=>{l.addEventListener("change",function(){e(".table-checkbox.yform-table","select_all_yform_tables")})}),e(".table-checkbox.core-table","select_all_core_tables"),e(".table-checkbox.yform-table","select_all_yform_tables")}};$(document).on("rex:ready",function(){if(window.location.href.indexOf("page=rexql")!==-1){console.log("rexQL Addon rex:ready"),typeof copyToClipboard=="undefined"&&(window.copyToClipboard=function(e){if(navigator.clipboard)navigator.clipboard.writeText(e).then(function(){}).catch(function(r){console.error("Failed to copy text: ",r)});else{const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select();try{document.execCommand("copy")}catch(o){console.error("Failed to copy text: ",o)}document.body.removeChild(r)}});var t=document.querySelectorAll("pre code");t.forEach(function(e){e.textContent.trim().startsWith("{")&&e.classList.add("language-graphql")});var n=document.querySelectorAll("[data-copy-api-key]");n.forEach(function(e){e.addEventListener("click",function(r){r.preventDefault();var o=this.getAttribute("data-copy-api-key");rexQL.copyToClipboard(o)})}),window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init(),window.location.href.indexOf("page=rexql/config")!==-1&&rexQL.config.init()}});
//# sourceMappingURL=rexql.js.map
