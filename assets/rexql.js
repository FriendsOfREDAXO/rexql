const g="modulepreload",x=function(o,e){return new URL(o,e).href},p={},k=function(e,n,t){let r=Promise.resolve();if(n&&n.length>0){let u=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),s=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=u(n.map(a=>{if(a=x(a,t),a in p)return;p[a]=!0;const d=a.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!t)for(let m=i.length-1;m>=0;m--){const y=i[m];if(y.href===a&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(a,'"]').concat(f)))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":g,d||(h.as="script"),h.crossOrigin="",h.href=a,s&&h.setAttribute("nonce",s),document.head.appendChild(h),d)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error("Unable to preload CSS for ".concat(a))))})}))}function c(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&c(l.reason);return e().catch(c)})},E={init:function(){console.log("rexQL.playground.init()");const o=document.getElementById("graphql-query"),e=document.getElementById("api-key-input"),n=document.getElementById("execute-query"),t=document.getElementById("clear-result"),r=document.getElementById("query-result");!o||!n||(this.initCodemirror(o),n.addEventListener("click",function(){const c=o.value.trim();rexQL.playground.executeQuery(c,e.value.trim(),r,n)}),t.addEventListener("click",function(){r.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(o,e,n,t){var l;if(!o){alert("Bitte geben Sie eine GraphQL Query ein.");return}n.textContent="Führe Query aus...",t.disabled=!0;const r={query:o},c={"Content-Type":"application/json"};e&&(c["X-API-KEY"]=e);const i=((l=document.querySelector("[data-endpoint-url]"))==null?void 0:l.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/index.php?rex-api-call=rexql";fetch(i,{method:"POST",headers:c,body:JSON.stringify(r)}).then(async s=>{const u=await s.json();if(s.ok)n.textContent=JSON.stringify(u,null,2);else{let a="HTTP "+s.status+": "+s.statusText+"\n\n";throw u.errors&&u.errors.length>0&&(a+="GraphQL Fehler:\n",u.errors.forEach(d=>{a+="• "+d.message+"\n"})),new Error(a)}}).catch(s=>{n.textContent="Netzwerkfehler: "+s.message+"\n\nTipps: Stellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{t.disabled=!1})},initCodemirror:async function(o){const e=await k(()=>import("./graphql-editor-DmNFSS3w.js"),[],import.meta.url),n=document.getElementById("graphql-schema");new e.GraphQLEditor(n,{schema,initialValue:"",height:"400px",readOnly:!0,renderSchema:!0,onChange:r=>{o.value=r}});const t=document.getElementById("graphql-editor");new e.GraphQLEditor(t,{schema,initialValue:o.value||"",height:"400px",onChange:r=>{o.value=r}})}},v=function(o,e,n){n=n||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(function(){b(n,"success",o.target)}).catch(function(){rexQL.fallbackCopyToClipboard(o,e,n)}):rexQL.fallbackCopyToClipboard(o,e,n)},w=function(o,e,n){var t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",document.body.appendChild(t),t.focus(),t.select();try{var r=document.execCommand("copy");r?b(n,"success",o.target):prompt("Bitte manuell kopieren:",e)}catch(c){console.error("Copy to clipboard failed:",c),prompt("Bitte manuell kopieren:",e)}document.body.removeChild(t)},b=function(o,e,n){e=e||"info";var t="alert-info";e==="success"&&(t="alert-success"),e==="error"&&(t="alert-danger"),e==="warning"&&(t="alert-warning");var r=document.createElement("div");r.className="alert rexql-notificiation "+t+" alert-dismissible",r.innerHTML='<div><button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+o+"</strong></div>";try{var c=document.querySelector(".rex-page-header")||document.body;c.appendChild(r)}catch(i){console.error("showNotification:",i)}setTimeout(function(){r.parentNode&&r.parentNode.removeChild(r)},3e3)},C={init:function(){const o=document.getElementById("select_all_core_tables");o&&o.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.core-table").forEach(i=>{i.checked=this.checked})});const e=document.getElementById("select_all_yform_tables");e&&e.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.yform-table").forEach(i=>{i.checked=this.checked})});const n=(c,i)=>{const l=document.querySelectorAll(c),s=document.getElementById(i);if(!s)return;const u=Array.from(l).every(a=>a.checked);s.checked=u};document.querySelectorAll(".table-checkbox.core-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.core-table","select_all_core_tables")})}),document.querySelectorAll(".table-checkbox.yform-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.yform-table","select_all_yform_tables")})}),n(".table-checkbox.core-table","select_all_core_tables"),n(".table-checkbox.yform-table","select_all_yform_tables")}};window.rexQL=window.rexQL||{playground:E,copyToClipboard:v,fallbackCopyToClipboard:w,showNotification:b,config:C};console.log("rexQL Addon rex:ready");var L=document.querySelectorAll("[data-copy]");L.forEach(function(o){o.addEventListener("click",function(e){e.preventDefault();var n=this.getAttribute("data-copy");rexQL.copyToClipboard(e,n)})});window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init();window.location.href.indexOf("page=rexql/config")!==-1&&rexQL.config.init();
//# sourceMappingURL=rexql.js.map
