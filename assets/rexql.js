const b="modulepreload",v=function(r,e){return new URL(r,e).href},g={},x=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let h=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const c=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=h(t.map(a=>{if(a=v(a,n),a in g)return;g[a]=!0;const d=a.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let m=c.length-1;m>=0;m--){const p=c[m];if(p.href===a&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(a,'"]').concat(f)))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":b,d||(u.as="script"),u.crossOrigin="",u.href=a,s&&u.setAttribute("nonce",s),document.head.appendChild(u),d)return new Promise((m,p)=>{u.addEventListener("load",m),u.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(a))))})}))}function l(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return o.then(c=>{for(const i of c||[])i.status==="rejected"&&l(i.reason);return e().catch(l)})},E={init:function(){console.log("rexQL.playground.init()");const r=document.getElementById("graphql-query"),e=document.getElementById("api-key-input"),t=document.getElementById("execute-query"),n=document.getElementById("clear-result"),o=document.getElementById("query-result");!r||!t||(this.initCodemirror(r),t.addEventListener("click",function(){const l=r.value.trim();rexQL.playground.executeQuery(l,e.value.trim(),o,t)}),n.addEventListener("click",function(){o.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(r,e,t,n){var i;if(!r){alert("Bitte geben Sie eine GraphQL Query ein.");return}t.textContent="Führe Query aus...",n.disabled=!0;const o={query:r},l={"Content-Type":"application/json"};e&&(l["X-API-KEY"]=e);const c=((i=document.querySelector("[data-endpoint-url]"))==null?void 0:i.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/index.php?rex-api-call=rexql";fetch(c,{method:"POST",headers:l,body:JSON.stringify(o)}).then(async s=>{const h=await s.json();if(s.ok)t.textContent=JSON.stringify(h,null,2);else{let a="HTTP "+s.status+": "+s.statusText+"\n\n";throw h.errors&&h.errors.length>0&&(a+="GraphQL Fehler:\n",h.errors.forEach(d=>{a+="• "+d.message+"\n"})),new Error(a)}}).catch(s=>{t.textContent="Netzwerkfehler: "+s.message+"\n\nTipps: Stellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{n.disabled=!1})},initCodemirror:async function(r){const e=await x(()=>import("./graphql-editor-D0C2pwbz.js"),[],import.meta.url),t=document.getElementById("graphql-schema");new e.GraphQLEditor(t,{schema,initialValue:"",height:"600px",readOnly:!0,renderSchema:!0,onChange:o=>{r.value=o}});const n=document.getElementById("graphql-editor");new e.GraphQLEditor(n,{schema,initialValue:r.value||"",height:"400px",onChange:o=>{r.value=o}})}},k=function(r,e,t){t=t||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(function(){y(t,"success",r.target)}).catch(function(){rexQL.fallbackCopyToClipboard(r,e,t)}):rexQL.fallbackCopyToClipboard(r,e,t)},w=function(r,e,t){var n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="2em",n.style.height="2em",n.style.padding="0",n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",document.body.appendChild(n),n.focus(),n.select();try{var o=document.execCommand("copy");o?y(t,"success",r.target):prompt("Bitte manuell kopieren:",e)}catch(l){console.error("Copy to clipboard failed:",l),prompt("Bitte manuell kopieren:",e)}document.body.removeChild(n)},y=function(r,e,t){e=e||"info";var n="alert-info";e==="success"&&(n="alert-success"),e==="error"&&(n="alert-danger"),e==="warning"&&(n="alert-warning");var o=document.createElement("div");o.className="alert rexql-notificiation "+n+" alert-dismissible",o.innerHTML='<div><button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+r+"</strong></div>";try{var l=document.querySelector(".rex-page-header")||document.body;l.appendChild(o)}catch(c){console.error("showNotification:",c)}setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},3e3)},C={init:function(){const r=Array.from(document.querySelectorAll('input[type="checkbox"][name="permissions[]"]'));if(r.length===0){console.warn("No checkboxes found for permissions.");return}const e=r.filter(o=>o.value!=="read:all"),t=r[0];t&&(t.addEventListener("change",function(){r.forEach(o=>{o.checked=this.checked})}),e.forEach(o=>{o.addEventListener("change",function(){t&&!this.checked?t.checked=!1:t&&e.every(l=>l.checked)&&(t.checked=!0)})})),(()=>{t.checked&&e.forEach(o=>{o.checked=!0})})()}};window.rexQL=window.rexQL||{playground:E,copyToClipboard:k,fallbackCopyToClipboard:w,showNotification:y,permissions:C};console.log("rexQL Addon rex:ready");var L=document.querySelectorAll("[data-copy]");L.forEach(function(r){r.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("data-copy");rexQL.copyToClipboard(e,t)})});window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init();window.location.href.indexOf("page=rexql/permissions&func=edit")!==-1&&rexQL.permissions.init();
//# sourceMappingURL=rexql.js.map
