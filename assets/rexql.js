const b="modulepreload",v=function(n,t){return new URL(n,t).href},g={},x=function(t,r,e){let o=Promise.resolve();if(r&&r.length>0){let h=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const c=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=h(r.map(a=>{if(a=v(a,e),a in g)return;g[a]=!0;const d=a.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!e)for(let m=c.length-1;m>=0;m--){const p=c[m];if(p.href===a&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(a,'"]').concat(f)))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":b,d||(u.as="script"),u.crossOrigin="",u.href=a,s&&u.setAttribute("nonce",s),document.head.appendChild(u),d)return new Promise((m,p)=>{u.addEventListener("load",m),u.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(a))))})}))}function l(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return o.then(c=>{for(const i of c||[])i.status==="rejected"&&l(i.reason);return t().catch(l)})},E={init:function(){console.log("rexQL.playground.init()");const n=document.getElementById("graphql-query"),t=document.getElementById("api-key-input"),r=document.getElementById("execute-query"),e=document.getElementById("clear-result"),o=document.getElementById("query-result");!n||!r||(this.initCodemirror(n),r.addEventListener("click",function(){const l=n.value.trim();rexQL.playground.executeQuery(l,t.value.trim(),o,r)}),e.addEventListener("click",function(){o.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(n,t,r,e){var i;if(!n){alert("Bitte geben Sie eine GraphQL Query ein.");return}r.textContent="Führe Query aus...",e.disabled=!0;const o={query:n},l={"Content-Type":"application/json"};t&&(l["X-API-KEY"]=t);const c=((i=document.querySelector("[data-endpoint-url]"))==null?void 0:i.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/index.php?rex-api-call=rexql";fetch(c,{method:"POST",headers:l,body:JSON.stringify(o)}).then(async s=>{const h=await s.json();if(s.ok)r.textContent=JSON.stringify(h,null,2);else{let a="HTTP "+s.status+": "+s.statusText+"\n\n";throw h.errors&&h.errors.length>0&&(a+="GraphQL Fehler:\n",h.errors.forEach(d=>{a+="• "+d.message+"\n"})),new Error(a)}}).catch(s=>{r.textContent="Netzwerkfehler: "+s.message+"\n\nTipps: Stellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{e.disabled=!1})},initCodemirror:async function(n){const t=await x(()=>import("./graphql-editor-DmNFSS3w.js"),[],import.meta.url),r=document.getElementById("graphql-schema");new t.GraphQLEditor(r,{schema,initialValue:"",height:"400px",readOnly:!0,renderSchema:!0,onChange:o=>{n.value=o}});const e=document.getElementById("graphql-editor");new t.GraphQLEditor(e,{schema,initialValue:n.value||"",height:"400px",onChange:o=>{n.value=o}})}},w=function(n,t,r){r=r||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(function(){y(r,"success",n.target)}).catch(function(){rexQL.fallbackCopyToClipboard(n,t,r)}):rexQL.fallbackCopyToClipboard(n,t,r)},k=function(n,t,r){var e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",document.body.appendChild(e),e.focus(),e.select();try{var o=document.execCommand("copy");o?y(r,"success",n.target):prompt("Bitte manuell kopieren:",t)}catch(l){console.error("Copy to clipboard failed:",l),prompt("Bitte manuell kopieren:",t)}document.body.removeChild(e)},y=function(n,t,r){t=t||"info";var e="alert-info";t==="success"&&(e="alert-success"),t==="error"&&(e="alert-danger"),t==="warning"&&(e="alert-warning");var o=document.createElement("div");o.className="alert rexql-notificiation "+e+" alert-dismissible",o.innerHTML='<div><button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+n+"</strong></div>";try{var l=document.querySelector(".rex-page-header")||document.body;l.appendChild(o)}catch(c){console.error("showNotification:",c)}setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},3e3)},C={init:function(){const n=Array.from(document.querySelectorAll('input[type="checkbox"][name="permissions[]"]'));if(n.length===0){console.warn("No checkboxes found for permissions.");return}const t=n.filter(o=>o.value!=="read:all"),r=n[0];r&&r.addEventListener("change",function(){n.forEach(o=>{o.checked=this.checked})}),(()=>{r.checked&&t.forEach(o=>{o.checked=!0})})()}};window.rexQL=window.rexQL||{playground:E,copyToClipboard:w,fallbackCopyToClipboard:k,showNotification:y,permissions:C};console.log("rexQL Addon rex:ready");var L=document.querySelectorAll("[data-copy]");L.forEach(function(n){n.addEventListener("click",function(t){t.preventDefault();var r=this.getAttribute("data-copy");rexQL.copyToClipboard(t,r)})});window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init();window.location.href.indexOf("page=rexql/permissions&func=edit")!==-1&&rexQL.permissions.init();
//# sourceMappingURL=rexql.js.map
