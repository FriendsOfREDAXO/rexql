const g="modulepreload",x=function(t,e){return new URL(t,e).href},b={},k=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let u=function(i){return Promise.all(i.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),s=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=u(n.map(i=>{if(i=x(i,r),i in b)return;b[i]=!0;const d=i.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let m=a.length-1;m>=0;m--){const y=a[m];if(y.href===i&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(i,'"]').concat(f)))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":g,d||(h.as="script"),h.crossOrigin="",h.href=i,s&&h.setAttribute("nonce",s),document.head.appendChild(h),d)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error("Unable to preload CSS for ".concat(i))))})}))}function c(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&c(l.reason);return e().catch(c)})},v={init:function(){console.log("rexQL.playground.init()");const t=document.getElementById("graphql-query"),e=document.getElementById("api-key-input"),n=document.getElementById("execute-query"),r=document.getElementById("clear-result"),o=document.getElementById("query-result");!t||!n||(this.initCodemirror(t),n.addEventListener("click",function(){const c=t.value.trim();rexQL.playground.executeQuery(c,e.value.trim(),o,n)}),r.addEventListener("click",function(){o.textContent="Führen Sie eine Query aus, um Ergebnisse zu sehen..."}))},executeQuery:function(t,e,n,r){var l;if(!t){alert("Bitte geben Sie eine GraphQL Query ein.");return}n.textContent="Führe Query aus...",r.disabled=!0;const o={query:t},c={"Content-Type":"application/json"};e&&(c["X-API-KEY"]=e);const a=((l=document.querySelector("[data-endpoint-url]"))==null?void 0:l.getAttribute("data-endpoint-url"))||window.rexQLEndpointUrl||"/index.php?rex-api-call=rexql_graphql";fetch(a,{method:"POST",headers:c,body:JSON.stringify(o)}).then(async s=>{const u=await s.json();if(s.ok)n.textContent=JSON.stringify(u,null,2);else{let i="HTTP "+s.status+": "+s.statusText+"\n\n";throw u.errors&&u.errors.length>0&&(i+="GraphQL Fehler:\n",u.errors.forEach(d=>{i+="• "+d.message+"\n"})),new Error(i)}}).catch(s=>{n.textContent="Netzwerkfehler: "+s.message+"\n\nTipps: Stellen Sie sicher, dass:\n• Der GraphQL Endpoint erreichbar ist\n• Sie einen gültigen API-Schlüssel eingegeben haben\n• Die Query syntaktisch korrekt ist"}).finally(()=>{r.disabled=!1})},initCodemirror:async function(t){const e=await k(()=>import("./graphql-editor-DmNFSS3w.js"),[],import.meta.url),n=document.getElementById("graphql-schema");new e.GraphQLEditor(n,{schema,initialValue:"",height:"400px",readOnly:!0,renderSchema:!0,onChange:o=>{t.value=o}});const r=document.getElementById("graphql-editor");new e.GraphQLEditor(r,{schema,initialValue:t.value||"",height:"400px",onChange:o=>{t.value=o}})}},E=function(t,e,n){n=n||"In Zwischenablage kopiert",navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(function(){p(n,"success",t.target)}).catch(function(){rexQL.fallbackCopyToClipboard(t,e,n)}):rexQL.fallbackCopyToClipboard(t,e,n)},w=function(t,e,n){var r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",document.body.appendChild(r),r.focus(),r.select();try{var o=document.execCommand("copy");o?p(n,"success",t.target):prompt("Bitte manuell kopieren:",e)}catch(c){console.error("Copy to clipboard failed:",c),prompt("Bitte manuell kopieren:",e)}document.body.removeChild(r)},p=function(t,e,n){e=e||"info";var r="alert-info";e==="success"&&(r="alert-success"),e==="error"&&(r="alert-danger"),e==="warning"&&(r="alert-warning");var o=document.createElement("div");o.className="alert rexql-notificiation "+r+" alert-dismissible",o.innerHTML='<div><button type="button" class="close" data-dismiss="alert">&times;</button><strong>'+t+"</strong></div>";try{var c=document.querySelector(".rex-page-header")||document.body;c.appendChild(o)}catch(a){console.error("showNotification:",a)}setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},3e3)},C=function(t){return t.replace(/\s+/g," ").replace(/\{\s*/g,"{\n  ").replace(/\s*\}/g,"\n}").replace(/,\s*/g,",\n  ").trim()},L=function(t){var e=(t.match(/\{/g)||[]).length,n=(t.match(/\}/g)||[]).length;return e!==n?"Unbalanced braces in GraphQL query":t.trim().length===0?"Empty query":null},S={init:function(){const t=document.getElementById("select_all_core_tables");t&&t.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.core-table").forEach(a=>{a.checked=this.checked})});const e=document.getElementById("select_all_yform_tables");e&&e.addEventListener("change",function(){document.querySelectorAll(".table-checkbox.yform-table").forEach(a=>{a.checked=this.checked})});const n=(c,a)=>{const l=document.querySelectorAll(c),s=document.getElementById(a);if(!s)return;const u=Array.from(l).every(i=>i.checked);s.checked=u};document.querySelectorAll(".table-checkbox.core-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.core-table","select_all_core_tables")})}),document.querySelectorAll(".table-checkbox.yform-table").forEach(c=>{c.addEventListener("change",function(){n(".table-checkbox.yform-table","select_all_yform_tables")})}),n(".table-checkbox.core-table","select_all_core_tables"),n(".table-checkbox.yform-table","select_all_yform_tables")}};window.rexQL=window.rexQL||{playground:v,copyToClipboard:E,fallbackCopyToClipboard:w,showNotification:p,formatGraphQL:C,validateGraphQL:L,config:S};console.log("rexQL Addon rex:ready");var _=document.querySelectorAll("[data-copy]");_.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();var n=this.getAttribute("data-copy");rexQL.copyToClipboard(e,n)})});window.location.href.indexOf("page=rexql/playground")!==-1&&rexQL.playground.init();window.location.href.indexOf("page=rexql/config")!==-1&&rexQL.config.init();
//# sourceMappingURL=rexql.js.map
